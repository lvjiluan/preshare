<!DOCTYPE html>
<html lang="en">
<head>
    <script src="http://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js" type="text/javascript" charset="utf-8"></script>
    <script>
        // 防止iframe
        if(self != top)
            top.location.replace(self.location);
    </script>
    <meta charset="UTF-8">
    <title>{:C('WEB_TITLE')}HR端</title>

    <script type="text/javascript" src="__PUBLIC__/jquery-2.0.3.min.js"></script>
    <style>
        body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td { margin:0; padding:0; }
        mark{background: inherit;color: inherit}
        body { background:#fff; color:#555; font-size: 14px; font-family: 'Microsoft Yahei',Tahoma,Helvetica,Arial,sans-serif; }
        h1, h2, h3, h4, h5, h6, p{ font-weight:normal; font-size:100%;}
        a { color:#555; text-decoration:none;}
        a:hover{text-decoration: none !important;}
        img { border:none; }
        ol,ul,li { list-style:none; }
        i{ font-style: normal}
        input, textarea, select, button { font:14px Verdana,Helvetica,Arial,sans-serif; border: 1px solid #999; outline: none; }
        table { border-collapse:collapse; }
        .cf:after {content: ""; display: block;clear: both;}
        .cf { display: inline-table; }
        /* Hides from IE-mac \*/
        * html .cf { height: 1%; }
        .cf { display: block; }
        /* End hide from IE-mac */
        .fl{float: left;}
        .fr{float: right;}
        button{cursor: pointer;  outline: none;  border: 0;}
        @media all and (min-width:310px){html{font-size: 42px;}}
        @media all and (min-width:370px){html{font-size: 50px;}}
        @media all and (min-width:410px){html{font-size: 55px;}}
        
        /*************************************************/
        *{
            box-sizing: border-box;
        }
        html,body{
            width: 100%;
            height: 100%;
            margin: 0;
            background: #fff;
            /*min-width: 1200px;*/
            background: url("__PUBLIC__/Hr/images/bg@2x.png") no-repeat center top;
            padding-top: 3%;
        }
        .login{
            width: 660px;
            margin: 0 auto;
        }
        .login-logo{
            width: 100px;
            margin: 0 auto;
        }
        .login-logo img{
            width: 100%;
            display: block;
        }
        .login-title {
            width: 270px;
            margin: 0 auto;
        }
        .login-title img{
            width: 100%;
            display: block;
        }
        .login-b{
            width: 100%;
            background: #fff;
            margin-top: 50px;
            border: 1px solid #D6D6D6;
            border-radius: 3px;
            padding-top: 20px;
        }
        .login-l{
            width: 400px;
            padding: 20px 15px;
            border-right: 1px dashed #D6D6D6;
        }
        .login-l ul li{
            display: flex;
            flex: 1;
            margin-bottom: 10px;
        }
        .lg-i{
            width: 100%;
            display: flex;
            flex: 1;
            padding: 15px;
            border-bottom: 1px solid #E0E0E0;
        }
        .lg-i span{
            width: 24px;
            /*height: 40px;*/
            display: block;
            margin-right: 5px;
            align-items: center;
        }
        .lg-i span img{
            width: 100%;
            display: block;
            /*vertical-align: middle;*/
            /*display: flex;*/
            /*justify-content: center;*/
        }
        .lg-i input{
            height: 25px;
            padding-left: 10px;
            width: 100%;
            border: none;
        }
        input::-webkit-input-placeholder{
            color: #CBCBCB;
        }
        .lg-code{
            width: 100px;
            margin-right: 10px;
            margin-top: 10px;
        }
        .lg-code img{
            width: 100%;
            display: block;
        }
        .login-l button{
            width: 100%;
            height: 50px;
            background: #0DBCD1;
            color: #fff;
            font-size: 18px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .login-code{
            width: 258px;
            padding-top: 40px;
        }
        .login-code span{
            width: 120px;
            display: block;
            margin: 0 auto;
            border-radius: 10px;
            border: 1px solid #E0E0E0;
            overflow: hidden;
        }
        .login-code span img{
            width: 100%;
            display: block;
        }
        .login-code p{
            text-align: center;
            font-size: 14px;
            color: #555555;
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div class="login">
    <div class="login-logo">
        <img src="__PUBLIC__/Hr/images/logo@3x.png"/>
    </div>
    <div class="login-title">
        <img src="__PUBLIC__/Hr/images/title.png"/>
    </div>
    <div class="login-b cf">
        <div class="login-l fl">
            <form class="form ajaxForm" name="login" action="{:U('Login/phoneLogin')}" method="post">
                <ul>
                    <li>
                    <div class="lg-i">
                        <span><img src="__PUBLIC__/Hr/images/i1@3x.png"/></span>
                        <input placeholder="输入你绑定的手机号" type="text" name="mobile" value="" autocomplete="off" /><div id="send">发送</div>
                    </div>
                   </li>
                    <li>
                        <div class="lg-i">
                            <span><img src="__PUBLIC__/Hr/images/i2@3x.png"/></span>
                            <input placeholder="输入你的验证码" type="text" name="chkcode" value="" autocomplete="off" />
                        </div>
                    </li>
                    <!--<li>-->
                        <!--<div class="lg-i">-->
                            <!--<span><img src="__PUBLIC__/Hr/images/i2@3x.png"/></span>-->
                            <!--<input placeholder="输入你的密码" type="password" name="password" value="" autocomplete="new-password" />-->
                        <!--</div>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<div class="lg-i">-->
                            <!--<span><img src="__PUBLIC__/Hr/images/i3@3x.png"/></span>-->
                            <!--<input placeholder="输入验证码" type="text" name="chkcode" />-->
                        <!--</div>-->
                        <!--<div class="lg-code">-->
                            <!--<img id="chk_img" src="{:U('Login/chkcode','','')}"/>-->
                        <!--</div>-->
                    <!--</li>-->
                </ul>
                <button type="submit" id="login-button">登录</button>
            </form>
        </div>
        <div class="login-code fr">
            <span>
                <img src="__PUBLIC__/Hr/images/code.jpg">
            </span>
            <div id="login_container">

            </div>
            <p>扫描二维码<br>
                立即使用小程序</p>
        </div>
    </div>
</div>
<script type="text/javascript" src="__PUBLIC__/layer/layer.js"></script>
<script type="text/javascript" src="__ADMIN__/js/common.js"></script>
<script type="text/javascript" src="__STATIC__/js/ajaxForm.js"></script>
<script>
    $("#chk_img").click(function(){
        $(this).attr('src',"{:U('Login/chkcode','','')}#" + Math.random());
    });
    $("#changeChkcode").click(function(){
        $(this).prev('img').trigger('click');
    });
    $(".choose").on('click', '.choose-item', function () {
        var typeId = $(this).data('type');
        $(this).addClass('active').siblings().removeClass('active');
        $('#user_type').val(typeId);
    });
    function validate() {
        var mobile = $("input[name=mobile]").val();
        if (mobile == "") {
            toastr("请输入登录帐号");
            return false;
        }
        var password = $("input[name=password]").val();
        if (password == "") {
            toastr("请输入登录密码");
            return false;
        }
        var chkcode = $("input[name=chkcode]").val();
        if (chkcode == "") {
            toastr("请输入验证码");
            return false;
        }
    }

    function callback(data) {
        if(!data.status){
            toastr(data.info);
            $("#changeChkcode").trigger('click');
            return false;
        }else{
            window.location.href = "{:U('/Hr/Index/index')}";
        }

    }
    // var obj = new WxLogin({
    //     self_redirect:false,
    //     id:"login_container",
    //     appid: "wxb7221179eaa2ade7",
    //     scope: "snsapi_login",
    //     redirect_uri: "https%3a%2f%2fshanjian.host5.liuniukeji.net%2findex.php%2fhr%2fLogin%2fweiChatDoLogin",
    //     state: "Mobile",
    //     style: "black",
    //     href: ""
    // });
    $('#send').click(function () {
        var  mobile = $(" input[ name='mobile' ] ").val();
        if(mobile == ''){
            toastr("请输入手机号");
            return
        }
        if(!isPhoneNo(mobile)){
            toastr("您输入的手机号有误");
            return
        }
        $.post("{:U('Api/PublicApi/smsCode')}",{"mobile":mobile,"user_type":1,"type":7},function(result){
                  console.log(result);
                  toastr(result['info']);
        });

    })
    function isPhoneNo(phone) {
        var pattern = /^1[34578]\d{9}$/;
        return pattern.test(phone);
    }
</script>
</body>
</html>